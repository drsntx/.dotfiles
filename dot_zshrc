#!/bin/zsh
# Daniel Santos' .zshrc
# Main Zsh configuration file

# Set ZDOTDIR if not already set
export ZDOTDIR="${ZDOTDIR:-$HOME/.dotfiles/zsh}"

# Create zsh directory if it doesn't exist
[[ ! -d "$ZDOTDIR" ]] && mkdir -p "$ZDOTDIR"

# Path to Oh My Zsh installation
export ZSH="$HOME/.oh-my-zsh"

# Oh My Zsh theme (using Starship instead)
ZSH_THEME=""

# Oh My Zsh plugins
plugins=(
    git
    colored-man-pages
    extract
    web-search
    zsh-autosuggestions
    zsh-syntax-highlighting
    zsh-history-substring-search
)

# Load Oh My Zsh if available
[[ -f "$ZSH/oh-my-zsh.sh" ]] && source "$ZSH/oh-my-zsh.sh"

# Load all configuration files from zsh.d directory
if [[ -d "$HOME/.dotfiles/zsh/zsh.d" ]]; then
    for config_file in "$HOME/.dotfiles/zsh/zsh.d"/*.zsh; do
        [[ -r "$config_file" ]] && source "$config_file"
    done
fi

# Load clean_history script function
[[ -f "$HOME/.dotfiles/clean_history.zsh" ]] && source "$HOME/.dotfiles/clean_history.zsh"

# Initialize completions
autoload -Uz compinit
compinit

# Key bindings for history substring search
bindkey '^[[A' history-substring-search-up
bindkey '^[[B' history-substring-search-down
bindkey -M vicmd 'k' history-substring-search-up
bindkey -M vicmd 'j' history-substring-search-down

# FZF integration if available
[[ -f ~/.fzf.zsh ]] && source ~/.fzf.zsh

# Load local customizations if they exist
[[ -f "$HOME/.zshrc.local" ]] && source "$HOME/.zshrc.local"

